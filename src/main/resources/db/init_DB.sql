DROP TABLE USER_ROLES;
DROP TABLE USERS;
DROP TABLE DOCUMENTS;

--CREATE SEQUENCE global_seq AS BIGINT START WITH 1000;


CREATE TABLE USERS
(
    ID         BIGINT          not null primary key GENERATED BY DEFAULT AS IDENTITY (START WITH 1000, INCREMENT BY 1),
    ACTIVE     BOOLEAN         NOT NULL,
    USERNAME   VARCHAR(255)    NOT NULL,
    PASSWORD   VARCHAR(255)    NOT NULL
);

CREATE UNIQUE INDEX users_unique_username_idx ON USERS (USERNAME);


CREATE TABLE USER_ROLES
(
    USER_ID       BIGINT          NOT NULL,
    ROLES         VARCHAR(255)    NOT NULL,
    CONSTRAINT user_roles_idx UNIQUE (USER_ID, ROLES),
    FOREIGN KEY (USER_ID) REFERENCES USERS (ID) ON DELETE CASCADE
);


CREATE TABLE DOCUMENTS
(
    ID      BIGINT           not null primary key GENERATED BY DEFAULT AS IDENTITY (START WITH 1000, INCREMENT BY 1),
    SRC     VARCHAR(255)     NOT NULL
);

CREATE UNIQUE INDEX documents_unique_src_idx ON DOCUMENTS (SRC);
