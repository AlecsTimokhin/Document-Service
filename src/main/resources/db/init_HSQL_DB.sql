DROP TABLE USER_ROLES IF EXISTS;
DROP TABLE USERS IF EXISTS;
DROP TABLE DOCUMENTS IF EXISTS;

--CREATE SEQUENCE GLOBAL_SEQ AS INTEGER START WITH 1000;


CREATE TABLE USERS
(
    ID         BIGINT          GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY,
    ACTIVE     BOOLEAN         NOT NULL,
    USERNAME   VARCHAR(255)    NOT NULL,
    PASSWORD   VARCHAR(255)    NOT NULL
);

CREATE UNIQUE INDEX users_unique_username_idx ON USERS (USERNAME);


CREATE TABLE USER_ROLES
(
    USER_ID       BIGINT          NOT NULL,
    ROLES         VARCHAR(255)    NOT NULL,
    CONSTRAINT user_roles_idx UNIQUE (USER_ID, ROLES),
    FOREIGN KEY (USER_ID) REFERENCES USERS (ID) ON DELETE CASCADE
);


CREATE TABLE DOCUMENTS
(
    ID      BIGINT           GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY,
    SRC     VARCHAR(255)     NOT NULL
);

CREATE UNIQUE INDEX documents_unique_src_idx ON DOCUMENTS (SRC);
