<div style="line-height:1.5;">

Александр Тимохин<br>
alecsander.timokhin@yandex.ru<br>
<hr>

<h3>Описание Проекта</h3>

Настоящий Проект является сервисом по загрузке, хранению и управлению документами (далее Сервис).

На Сервисе представлены две роли пользователей:
- обычные пользователи (<b>User</b>);
- администраторы Сервиса (<b>Admin</b>).

Не авторизированный пользователь <b>Anonimus</b> может просматривать только главную страницу и страницу входа на Cервис.

<b>User</b> дополнительно может просматривать страницу со списком всех документов (и вывод всех документов по <b>REST</b>), 
каждый документ по отдельности.

<b>Admin</b> может просматривать всю информацию, что и <b>User</b>, а также добавлять новые документы и удалять уже имеющиеся.

<hr>


<h3>Запуск Проекта</h3>

Проект полностью рабочий.

<b>ВАЖНО</b> Перед запуском Проекта обратите внимание на константы файла <b>application.properties</b>:
<br><br>
<b>upload.path_Load</b>=C:/Projects/Java/Testtasks/CenterInform/documents<br>
<b>upload.path_Src</b>=/Projects/Java/Testtasks/CenterInform/documents
<br><br>
Данные константы указывают каталог файловой системы (в моем случае это Windows 10), куда сохраняются документы (<b>upload.path_Load</b>), и 
префикс для отображения документов на страницах Сервиса (<b>upload.path_Src</b>,- используется только в <b>SpringConfig.java</b>).
<br><br>
Для запуска Проекта необходимо запустить главный метод файла <b>Application.java</b>.
<br><br>
После запуска, Проект доступен по адресу http://localhost:8080/.
<br><br>
<b>Вход на сервис</b>:<br>
как <b>Admin</b> (логин: <b>Admin</b> пароль: <b>123</b>);<br>
как <b>User</b> (логин: <b>User</b>, пароль: <b>123</b>).
<hr>


<h3>Используемый стек технологий Проекта</h3>

Проект построен на <b>Spring Boot</b> с использованием <b>Spring MVC</b>, <b>Spring DATA JPA</b>, <b>Spring Security</b>. 
Пароли пользователей хешируются алгоритмом <b>BCrypt</b>

В качестве базы данных используется встроенная <b>Derby DB</b>. При старте Проекта в ней инициализируется определенный набор данных.

В качестве поставщика <b>JPA</b> используется <b>Hibernate5</b>.

В качестве <b>View</b> используется шаблонизатор <b>Thymeleaf</b>.

Для проверки прав пользователя перед каждым запросом (кроме статических файлов) используется интерцептор <b>SecurityInterceptor.java</b>.

В процессе запуска Проекта в конфигурационном файле <b>SpringConfig.java</b> вызывается метод <b>onStart()</b>, помеченный аннотацией 
<b>@EventListener(ContextRefreshedEvent.class)</b>. Данный метод отрабатывает сразу после поднятия контекста <b>Spring Framework</b>. 
В данном методе идет удаление всех имеющихся файлов в директории <b>documents</b> Проекта, а затем копирование файлов из директории 
<b>documents\documents_for_start</b> в директорию <b>documents</b>, для того, чтобы не было рассогласования 
между записями о документах в БД и реальным составом документов в хранилище (директории <b>documents</b>). 
Например, если при первом запуске Проекта администратор удалит некоторые документы, то при повторном запуске их состав станет первоначальным. 
<br><br>
Перед остановкой Проекта в конфигурационном файле <b>SpringConfig.java</b> вызывается метод <b>onDestroy()</b>, помеченный аннотацией 
<b>@PreDestroy</b>. Он удаляет все файлы (документы) из директории <b>documents</b>. 

Добавление и удаление документов администратором Сервиса происходит по <b>REST</b> через <b>AJAX</b> (<b>jQuery</b>) в формате <b>JSON</b>.

На сервисе предусмотрена обработка ошибки 404, а также внутренних ошибок сервера в файле <b>ControllerExceptionHandler.java</b>.

На Сервиве обрабатываются все исключительные ситуации. Используются пользовательские исключения, 
наследуемые от <b>RuntimeException</b>, обработка которых происходит в <b>RestControllerExceptionHandler.java</b>

При добавлении и удалении документов используются обязательные транзакции, настроенные на откат при любом исключении.

</div>

